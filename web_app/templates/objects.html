{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1>Добавить точку</h1>
    <form action="{{ url_for('add_object') }}" method="post" class="compact-form">
        <label for="login">Логин:</label>
        <input type="text" id="login" name="login" required><br>
        <label for="address">Адрес:</label>
        <input type="text" id="address" name="address" required><br>
        <label for="entity_id">Наименование компании:</label>
        <select id="entity_id" name="entity_id" required>
            {% for entity in entities %}
            <option value="{{ entity.id }}">{{ entity.name }}</option>
            {% endfor %}
        </select><br>
        <button type="submit">Добавить</button>
    </form>

    <h2>Список точек</h2>
    <table id="objects_table" border="1">
        <thead>
        <tr>
            <th>ID</th>
            <th>Логин</th>
            <th>Адрес</th>
            <th>Компания</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        {% for object in objects %}
        <tr>
            <td>{{ object.id }}</td>
            <td>{{ object.login }}</td>
            <td>{{ object.address }}</td>
            <td>{{ object.entity_id.name }}</td>
            <td>
                <form action="{{ url_for('update_object', login=object.login) }}" method="get" style="display:inline;">
                    <button type="submit">Изменить</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function() {
        $('#objects_table').DataTable();
    });
</script>
{% endblock %}
