{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1>Список заявок</h1>
    <table id="orders_table" border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Тип заявки</th>
                <th>Тип неполадки</th>
                <th>Адрес</th>
                <th>Дата создания</th>
                <th>Статус</th>
            </tr>
        </thead>
        <tbody>
        {% for order in orders %}
            <tr>
                <td><a href="{{ url_for('order_detail', order_id=order.id) }}">{{ order.id }}</a></td>
                <td>{{ order.order_type_id.order_type }}</td>
                <td>{{ order.breaking_type_id.breaking_type}}</td>
                <td>{{ order.user_id.object_id.address}}</td>
                <td>{{ order.date_create }}</td>
                <td>{{ order.status_id.status }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        $('#orders_table').DataTable();

        $('.action-icon').click(function(event) {
            event.preventDefault();
            var orderId = $(this).data('id');
            var action = $(this).data('action');
            var newStatus = (action === 'approve') ? 1 : -1; // 1 for approve, -1 for cancel

                }
            });
        });
    });
</script>
{% endblock %}
